<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>ITensor extension · FuzzifiED.jl</title><meta name="title" content="ITensor extension · FuzzifiED.jl"/><meta property="og:title" content="ITensor extension · FuzzifiED.jl"/><meta property="twitter:title" content="ITensor extension · FuzzifiED.jl"/><meta name="description" content="Documentation for FuzzifiED.jl."/><meta property="og:description" content="Documentation for FuzzifiED.jl."/><meta property="twitter:description" content="Documentation for FuzzifiED.jl."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script><link href="../assets/serif.css" rel="stylesheet" type="text/css"/><link href="../assets/favicon.ico" rel="icon" type="image/x-icon"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.svg" alt="FuzzifiED.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../">FuzzifiED.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../intro/">Introduction</a></li><li><a class="tocitem" href="../tutorial/">Tutorial</a></li><li><a class="tocitem" href="../core/">Core functions</a></li><li><a class="tocitem" href="../models/">Built-in models</a></li><li class="is-active"><a class="tocitem" href>ITensor extension</a><ul class="internal"><li><a class="tocitem" href="#Format-conversion"><span>Format conversion</span></a></li><li><a class="tocitem" href="#Easy-sweep"><span>Easy sweep</span></a></li><li><a class="tocitem" href="#Modified-version-of-ITensor"><span>Modified version of ITensor</span></a></li></ul></li><li><a class="tocitem" href="../extension/">Other extensions</a></li><li><a class="tocitem" href="../fuzzifino/">Fuzzifino</a></li><li><a class="tocitem" href="../manifolds/">Fuzzy manifolds</a></li><li><a class="tocitem" href="../releases/">Releases</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>ITensor extension</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>ITensor extension</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/FuzzifiED/FuzzifiED.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/FuzzifiED/FuzzifiED.jl/blob/main/docs/src/itensors.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="ITensor-extension"><a class="docs-heading-anchor" href="#ITensor-extension">ITensor extension</a><a id="ITensor-extension-1"></a><a class="docs-heading-anchor-permalink" href="#ITensor-extension" title="Permalink"></a></h1><p>FuzzifiED also supports an ITensor extension, including convertion with the <code>Site</code> and <code>OpSum</code> objects from ITensor library and management of DMRG sweeping process. To use the extension, make sure the packages <code>ITensors</code>, <code>ITensorMPS</code> are properly installed, and include</p><pre><code class="language-julia hljs">using ITensors, ITensorMPS</code></pre><p>at the heading of the Julia script.</p><p>During intialisation, the optimal configuration for parallelisation is already automatically set.</p><pre><code class="language-julia hljs">BLAS.set_num_threads(1);
NDTensors.Strided.disable_threads();
ITensors.enable_threaded_blocksparse();</code></pre><h2 id="Format-conversion"><a class="docs-heading-anchor" href="#Format-conversion">Format conversion</a><a id="Format-conversion-1"></a><a class="docs-heading-anchor-permalink" href="#Format-conversion" title="Permalink"></a></h2><p>FuzzyfiED defines a new SityType &quot;FuzzyFermion&quot; that can be initialised from QNDiags to avoid overwriting the original &quot;Fermion&quot; type.</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ITensors.space-Tuple{SiteType{FuzzyFermion}}" href="#ITensors.space-Tuple{SiteType{FuzzyFermion}}"><code>ITensors.space</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ITensors.space( :: SiteType&quot;FuzzyFermion&quot; ; o :: Int, qnd :: Vector{QNDiag})</code></pre><p>Define a new site type &quot;FuzzyFermion&quot; which inherits all the features of ITensor type &quot;Fermion&quot;. It can be initialised by a set of QNDiag&#39;s and the site index <span>$o$</span>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/FuzzifiED/FuzzifiED.jl/blob/d7cfcaa9b45dc1457e5e50ae24b49992d02481e9/ext/FuzzifiEDITensorsExt/fermion_type.jl#L2-L6">source</a></section></article><p>The <code>Sites</code> objects in ITensor can be converted to a QNDiags and Confs with the QNs extracted. </p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FuzzifiED.GetQNDiags-Tuple{Vector{Index{Vector{Pair{QN, Int64}}}}}" href="#FuzzifiED.GetQNDiags-Tuple{Vector{Index{Vector{Pair{QN, Int64}}}}}"><code>FuzzifiED.GetQNDiags</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">GetQNDiags(sites :: Vector{&lt;:Index})</code></pre><p>Converts a <code>Sites</code> object in the <code>ITensors</code> package to a set of QNDiags. </p><p><strong>Arguments</strong></p><ul><li><code>sites :: Vector{&lt;:Index}</code> is a <code>Sites</code> object. Only <code>Fermion</code> site type is supported, and the quantum numbers of the <code>0</code> state must be all zero. Note that this will subject to the limitation in ITensors that the number of conserved quantities must be less than 4.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/FuzzifiED/FuzzifiED.jl/blob/d7cfcaa9b45dc1457e5e50ae24b49992d02481e9/ext/FuzzifiEDITensorsExt/itensors_format.jl#L4-L12">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FuzzifiED.Confs-Tuple{Vector{Index{Vector{Pair{QN, Int64}}}}, QN}" href="#FuzzifiED.Confs-Tuple{Vector{Index{Vector{Pair{QN, Int64}}}}, QN}"><code>FuzzifiED.Confs</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">Confs(sites :: Vector{&lt;:Index}, sec_qn :: QN)
Confs(sites :: Vector{&lt;:Index}, cf_ref :: Vector{Int64})</code></pre><p>Converts a <code>Sites</code> object in the <code>ITensors</code> package to the <code>Confs</code> object</p><p><strong>Arguments</strong></p><ul><li><code>sites :: Vector{&lt;:Index}</code> is a <code>Sites</code> object. Only <code>Fermion</code> site type is supported, and the quantum numbers of the <code>0</code> state must be all zero. Note that this will subject to the limitation in ITensors that the number of conserved quantities must be less than 4. </li><li><code>sec_qn :: QN</code> is a <code>QN</code> object that specifies the the quantum number of the selected configuration. Alternatively, <code>cf_ref :: Vector{Int64})</code> is a reference configuration composed of <code>0</code> and <code>1</code>.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/FuzzifiED/FuzzifiED.jl/blob/d7cfcaa9b45dc1457e5e50ae24b49992d02481e9/ext/FuzzifiEDITensorsExt/itensors_format.jl#L36-L46">source</a></section></article><p>Conversely, the  <code>Sites</code> objects in ITensors can also be generated from a set of diagonal quantum numbers </p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FuzzifiED.GetSites-Tuple{Vector{QNDiag}}" href="#FuzzifiED.GetSites-Tuple{Vector{QNDiag}}"><code>FuzzifiED.GetSites</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">GetSites(qnd :: Vector{QNDiag}) :: Vector{&lt;:Index}</code></pre><p>returns the ITensors Sites of type &quot;FuzzyFermion&quot; from a set of QNDiags.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/FuzzifiED/FuzzifiED.jl/blob/d7cfcaa9b45dc1457e5e50ae24b49992d02481e9/ext/FuzzifiEDITensorsExt/itensors_format.jl#L83-L87">source</a></section></article><p>If the number of quantum numbers are too many, it can be truncated by </p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FuzzifiED.TruncateQNDiag-Tuple{Vector{QNDiag}}" href="#FuzzifiED.TruncateQNDiag-Tuple{Vector{QNDiag}}"><code>FuzzifiED.TruncateQNDiag</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">TruncateQNDiag(qnd :: Vector{QNDiag} ; trunc_lth :: Int64, trunc_wt :: Vector{Int64}) :: Vector{QNDiag}</code></pre><p>truncates the list of <span>$N_U$</span> QNDiags from to a number <span>$N&#39;_U$</span> acceptable by ITensors. The new quantum numbers are </p><p class="math-container">\[\begin{aligned}
    &amp;Q&#39;_1=Q_1,\ Q&#39;_2=Q_2,\ …,\ Q&#39;_{N&#39;_U-1}=Q_{N&#39;_U-1}\\
    &amp;Q&#39;_{N&#39;_U}=λ_{N&#39;_U}Q_{N&#39;_U}+λ_{N&#39;_U+1}Q_{N&#39;_U+1}+…+λ_{N_U}Q_{N_U}
\end{aligned}\]</p><p><strong>Arguments</strong></p><ul><li><code>qnd :: Vector{QNDiag}</code> stores the set of QNDiags. </li><li><code>trunc_lth :: Int64</code> stores the truncated numbers of QNDiags. Facultative, 3 by default. </li><li><code>trunc_wt :: Vecotr{Int64}</code> stores the <span>$N_U-N&#39;_U+1$</span> coefficients <span>$λ$</span>. Facultative, <span>$1,10,100,1000,…$</span> by default. </li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/FuzzifiED/FuzzifiED.jl/blob/d7cfcaa9b45dc1457e5e50ae24b49992d02481e9/ext/FuzzifiEDITensorsExt/itensors_format.jl#L61-L77">source</a></section></article><p>The <code>OpSum</code> objects in ITensor can be converted with the collection of <code>Term</code>&#39;s</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FuzzifiED.Terms-Tuple{Sum{Scaled{ComplexF64, Prod{Op}}}}" href="#FuzzifiED.Terms-Tuple{Sum{Scaled{ComplexF64, Prod{Op}}}}"><code>FuzzifiED.Terms</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">Terms(opsum :: OpSum)</code></pre><p>Converts a <code>OpSum</code> object in <code>ITensors</code> to a series of terms. Note that the only operators supported are <code>&quot;C&quot;</code>, <code>&quot;Cdag&quot;</code> <code>&quot;N&quot;</code> and <code>&quot;I&quot;</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/FuzzifiED/FuzzifiED.jl/blob/d7cfcaa9b45dc1457e5e50ae24b49992d02481e9/ext/FuzzifiEDITensorsExt/itensors_format.jl#L94-L98">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ITensors.Ops.OpSum-Tuple{Vector{Term}}" href="#ITensors.Ops.OpSum-Tuple{Vector{Term}}"><code>ITensors.Ops.OpSum</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">OpSum(tms :: Terms)</code></pre><p>Converts a series of terms to <code>OpSum</code> object in <code>ITensors</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/FuzzifiED/FuzzifiED.jl/blob/d7cfcaa9b45dc1457e5e50ae24b49992d02481e9/ext/FuzzifiEDITensorsExt/itensors_format.jl#L128-L132">source</a></section></article><h2 id="Easy-sweep"><a class="docs-heading-anchor" href="#Easy-sweep">Easy sweep</a><a id="Easy-sweep-1"></a><a class="docs-heading-anchor-permalink" href="#Easy-sweep" title="Permalink"></a></h2><p>This tool kit facilitates the management of DMRG process. It automatically records the intermediate results and recover these results if a job is stopped and run again on HPC. It also manages the gradual increase of maximal bond dimensions and the determination of convergence by the criteria of energy. This extension required the packages <code>HDF5</code>. We also recommand using the package <a href="https://github.com/ITensor/ITensorMPOConstruction.jl"><code>ITensorMPOConstruction</code></a> for the generation of Hamiltonian MPO, which can be installed by </p><pre><code class="language-julia hljs">using Pkg ; Pkg.add(url=&quot;https://github.com/ITensor/ITensorMPOConstruction.jl.git&quot;)</code></pre><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FuzzifiED.EasySweep-Tuple{String, MPO, MPS}" href="#FuzzifiED.EasySweep-Tuple{String, MPO, MPS}"><code>FuzzifiED.EasySweep</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">EasySweep(id :: String, hmt :: MPO, st00 :: MPS ; path :: String, dim_list :: Vector{Int64}, proj :: Vector{String}, e_tol1 :: Float64, e_tol :: Float64, cutoff :: Vector{Float64}, maxdim0 :: Vector{Float64}, noise0 :: Vector{Float64}, noise :: Vector{Int64}, nsweeps :: Int64, weight :: Float64, observer :: AbstractObserver) :: Tuple{Float64, MPS}</code></pre><p><strong>Function</strong></p><p>This function automatically performs several rounds of DMRG sweeps with increasing bond dimensions. It first checks the file <code>st_$(id).h5</code> in a specified repository. If the key <code>st_fin</code> exists, it reads the energy and MPS from the file and return the energy and MPS, otherwise it will perform the DMRG process. For each round, it will try to access the results from the key <code>st_d$(dim_i)</code> in <code>st_$(id).h5</code>, where <code>dim_i</code> is either <code>0</code> representing the initial round, or an element of array <code>dim_list</code>. If the key exist, it will read the result ; otherwise it will perform the sweeps using <a href="#FuzzifiED.SweepOne-Tuple{String, MPO, MPS, Int64}"><code>SweepOne</code></a>. For the initial round, it will take the initial state from <code>st00</code>, the maximal bond dimensions from <code>maxdim0</code>, noise from <code>noise0</code> and record the results in the key <code>E_d0</code> and <code>st_d0</code> in <code>st_$(id).h5</code>. For each of the following round, it will take the result from the previous round as the initial state and perform <code>nsweeps</code> sweeps with the bond dimension <code>dim_list[i]</code>. Each round will be stopped if the energy difference is less than <code>e_tol1</code>. The entire process will be stopped if the energy difference between two rounds is less than <code>e_tol</code> or the bond dimension of the result is less than 0.9 times the maximal bond dimension. The projected states will be accessed from the files specified by <code>proj</code>. It will try to access first the states with the same bond dimension as the projected states. If such states do not exist, it will then access the final state. The resulting energy will be written into the key <code>E_fin</code> in the file <code>st_$(id).h5</code>, and the MPS written into <code>st_fin</code>. The function returns a tuple of energy and the final MPS. </p><p><strong>Arguments</strong></p><ul><li><code>id :: String</code> is a string identifying the file to which the results will be accessed and written.</li><li><code>hmt :: MPO</code> is an MPO specifying the Hamiltonian.</li><li><code>st00 :: MPS</code> is an MPS specifying the initial state. </li><li><code>path :: String</code> identifies the path where the results will be accessed and stored. Facultative, <code>./</code> by default. </li><li><code>dim_list :: Vector{Int64} :: Int64</code> is a list that specifies the maximal bond dimensions of each round of sweeps starting from the second round. Facultative, <code>[1000,2000,3000,4000,5000,6000]</code> by default</li><li><code>proj :: Vector{String}</code> specifies the name of the states that will be projected. Facultative, empty by default. </li><li><code>e_tol1 :: Float64</code> specifies the energy tolerence as a criteria to end the round of sweeps for each round of sweeps. Facultative, <code>1E-6</code> by default. </li><li><code>e_tol :: Float64</code> specifies the energy tolerence as a criteria to end the entire process. Facultative, <code>1E-7</code> by default. </li><li><code>cutoff :: Vector{Float64}</code> is the cutoff that will be sent into DMRG. Facultative, <code>[1.E-9]</code> by default. </li><li><code>maxdim0 :: Vector{Int64}</code> specifies the maximal bond dimensions of the first round of sweeps. Facultative, <code>[10,20,50,100,200,500]</code> by default. </li><li><code>noise0 :: Vector{Float64}</code> specifies the noise of each sweep in the initial round and will be sent into DMRG. Facultative, <code>[1E-4,3E-5,1E-5,3E-6,1E-6,3E-7]</code> by default. </li><li><code>noise :: Vector{Float64}</code> specifies the noise of each sweep from the second round and will be sent into DMRG. Facultative, <code>[1E-6,1E-7,0]</code> by default. </li><li><code>nsweeps :: Int64</code> specifies the number of sweeps in each round from the second rounds. Facultative, 10 by default. </li><li><code>weight :: Float64</code> specifies the weight of projected states and will be sent into DMRG. Facultative, 100.0 by default.</li><li><code>observer :: AbstractObserver</code> specifies the measurement and cutoff condition for each sweep starting from the second round. Facultative, by default the observer will print the energy and cutoff once the energy difference is less than <code>e_tol</code> at each sweep. </li><li><code>dmrg_options :: Dict</code> specifies other options to be sent into DMRG. <em>E.g.</em>, to specify <code>write_when_maxdim_exceeds = 1000</code> and <code>write_path = &quot;./tmp/&quot;</code>, one can put <code>dmrg_options = Dict(:write_when_maxdim_exceeds =&gt; 1000, :write_path =&gt; &quot;./tmp/&quot;)</code>.</li><li><code>clear_previous :: Bool</code>. If set true, the file <code>st_$(id).h5</code> will be removed and the calculation will start from scratch. Facultative, false by default.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/FuzzifiED/FuzzifiED.jl/blob/d7cfcaa9b45dc1457e5e50ae24b49992d02481e9/ext/FuzzifiEDEasySweepExt/easy_sweep.jl#L88-L114">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FuzzifiED.SweepOne-Tuple{String, MPO, MPS, Int64}" href="#FuzzifiED.SweepOne-Tuple{String, MPO, MPS, Int64}"><code>FuzzifiED.SweepOne</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">SweepOne(id :: String, hmt :: MPO, st0 :: MPS, dim1 :: Int64 ; path :: String, cutoff :: Vector{Float64}, maxdim :: Vector{Int64}, nsweeps :: Int64, noise :: Vector{Float64}, proj :: Vector{String}, e_tol :: Float64, weight :: Float64, observer :: AbstractObserver, dmrg_options :: Dict, dmrg_options :: Dict) :: Tuple{Float64, MPS}</code></pre><p><strong>Function</strong></p><p>This function performs one round of <code>nsweeps</code> sweeps. It first checks the file <code>st_$(id).h5</code> in a specified repository. If the key <code>st_d$(dim1)</code> exists, it reads the energy and MPS from the file and return the energy and MPS, otherwise it will perform the DMRG process with the maximal bond dimension specified by <code>maxdim</code> if it exists, or <code>dim1</code>. The projected states will be read from the key <code>st_d$(dim1)</code> if it exists or <code>st_fin</code> in the file <code>st_$(fi).h5</code> in the same repository for each string <code>fi</code> in the array <code>proj</code>. The sweeps will be ended if the energy difference is less than <code>etol</code> or whatever criteria is given in <code>observer</code>. The resulting energy will be written into the key <code>E_d$(dim1)</code> in the file <code>st_$(id).h5</code>, and the MPS written into <code>st_d$(dim1)</code>. The function returns a tuple of energy and the final MPS. </p><p><strong>Arguments</strong></p><ul><li><code>id :: String</code> is a string identifying the file to which the results will be accessed and written.</li><li><code>hmt :: MPO</code> is an MPO specifying the Hamiltonian.</li><li><code>st0 :: MPS</code> is an MPS specifying the initial state. </li><li><code>dim1 :: Int64</code> is a bond dimension that will be used to identify the result. </li><li><code>path :: String</code> identifies the path where the results will be accessed and stored. Facultative, <code>./</code> by default. </li><li><code>cutoff :: Vector{Float64}</code> is the cutoff that will be sent into DMRG. Facultative, <code>[1.E-9]</code> by default. </li><li><code>maxdim :: Vector{Int64}</code> specifies the maximal bond dimension of each sweep. Facultative, <code>[dim1]</code> by default. </li><li><code>nsweeps :: Int64</code> specifies the number of sweeps in the round. Facultative, 10 by default. </li><li><code>noise :: Vector{Float64}</code> specifies the noise of each sweep and will be sent into DMRG. Facultative, <code>[1E-6,1E-7,0]</code> by default. </li><li><code>proj :: Vector{String}</code> specifies the name of the states that will be projected. Facultative, empty by default. </li><li><code>e_tol :: Float64</code> specifies the energy tolerence as a criteria to end the sweeps. Facultative, <code>1E-6</code> by default. </li><li><code>weight :: Float64</code> specifies the weight of projected states and will be sent into DMRG. Facultative, 100.0 by default.</li><li><code>observer :: AbstractObserver</code> specifies the measurement and cutoff condition for each sweep. Facultative, by default the observer will print the energy and cutoff once the energy difference is less than <code>e_tol</code> at each sweep. </li><li><code>dmrg_options :: Dict</code> specifies other options to be sent into DMRG. <em>E.g.</em>, to specify <code>write_when_maxdim_exceeds = 1000</code> and <code>write_path = &quot;./tmp/&quot;</code>, one can put <code>dmrg_options = Dict(:write_when_maxdim_exceeds =&gt; 1000, :write_path =&gt; &quot;./tmp/&quot;)</code>.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/FuzzifiED/FuzzifiED.jl/blob/d7cfcaa9b45dc1457e5e50ae24b49992d02481e9/ext/FuzzifiEDEasySweepExt/easy_sweep.jl#L22-L45">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FuzzifiED.GetMPOSites-Tuple{String, Union{Sum{Scaled{ComplexF64, Prod{Op}}}, Vector{Term}}, Vector{QNDiag}}" href="#FuzzifiED.GetMPOSites-Tuple{String, Union{Sum{Scaled{ComplexF64, Prod{Op}}}, Vector{Term}}, Vector{QNDiag}}"><code>FuzzifiED.GetMPOSites</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">GetMPOSites(id :: String, tms, qnd :: Vector{QNDiag} ; path :: String, qnu_o :: Vector{Vector{Int64}}, qnu_name :: Vector{String}, modul :: Vector{Int64}, mpo_method :: Function) :: Tuple{MPO, Vector{&lt;:Index}}</code></pre><p><strong>Function</strong></p><p>This function returns the MPO and sites for a given operator and a Hilbert space with given quantum numbers. It first checks the file <code>op_$(id).h5</code> in a specified repository. If the file exists, it will try to read the fields <code>mpo</code> and <code>sites</code> and return the MPO and Sites. Otherwise it will first generates the sites with the quantum numbers given in <code>qnd</code>. Then it will generate the MPO with the terms of the operator given in <code>tms</code>. The MPO and sites will be written into the file <code>op_$(id).h5</code> in the fields <code>mpo</code> and <code>sites</code>. </p><p><strong>Arguments</strong></p><ul><li><code>id :: String</code> is a string identifying the file to which the results will be accessed and written.</li><li><code>tms :: Terms</code> or <code>tms :: OpSum</code> is either an array of terms or a <code>OpSum</code> objects that specifies the expression of the operator. </li><li><code>qnd :: Vector{QNDiag}</code> is a list of diagonal quantum numbers. </li><li><code>path :: String</code> identifies the path where the results will be accessed and stored. Facultative, <code>./</code> by default. </li><li><code>mpo_method :: Function</code> is a function <code>mpo_method(os :: OpSum, sites :: Sites) :: MPO</code> that generates the MPO from OpSum and Sites. Facultative, <code>MPO</code> by default. We suggest using <code>MPO_new</code> in <code>ITensorMPOConstruction</code> package. See <a href="https://github.com/FuzzifiED/FuzzifiED.jl/blob/main/examples/example_ising_dmrg_easysweep.jl"><code>example_ising_dmrg_easysweep.jl</code></a> for example. <em>N.b.</em>, <code>MPO_new</code> only applies to the cases that the operator do not carry charge under any of the quantum numbers.</li><li><code>clear_previous :: Bool</code>. If set true, the file <code>op_$(id).h5</code> will be removed and the calculation will start from scratch. Facultative, false by default.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/FuzzifiED/FuzzifiED.jl/blob/d7cfcaa9b45dc1457e5e50ae24b49992d02481e9/ext/FuzzifiEDEasySweepExt/easy_sweep.jl#L149-L164">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FuzzifiED.GetMPO-Tuple{String, Union{Sum{Scaled{ComplexF64, Prod{Op}}}, Vector{Term}}, Vector{&lt;:Index}}" href="#FuzzifiED.GetMPO-Tuple{String, Union{Sum{Scaled{ComplexF64, Prod{Op}}}, Vector{Term}}, Vector{&lt;:Index}}"><code>FuzzifiED.GetMPO</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">GetMPO(id :: String, tms :: Union{Terms, OpSum}, sites :: Vector{&lt;:Index} ; path :: String, mpo_method :: Function) :: MPO</code></pre><p><strong>Function</strong></p><p>This function returns the MPO for a given operator and a given set of sites. It first checks the file <code>op_$(id).h5</code> in a specified repository. If the file exists, it will try to read the fields <code>mpo</code> and return the MPO it has read. Otherwise it will generate the MPO with the terms of the operator given in <code>tms</code>. The MPO and Sites will be written into the file <code>op_$(id).h5</code> in the fields <code>mpo</code>. </p><p><strong>Arguments</strong></p><ul><li><code>id :: String</code> is a string identifying the file to which the results will be accessed and written.</li><li><code>tms :: Terms</code> or <code>tms :: OpSum</code> is either an array of terms or a <code>OpSum</code> objects that specifies the expression of the operator. </li><li><code>sites :: Vector{&lt;:Index}</code> specifies the sites that the operator is acting on. </li><li><code>path :: String</code> identifies the path where the results will be accessed and stored. Facultative, <code>./</code> by default. </li><li><code>mpo_method :: Function</code> is a function <code>mpo_method(os :: OpSum, sites :: Sites) :: MPO</code> that generates the MPO from OpSum and Sites. Facultative, <code>MPO</code> by default. We suggest using <code>MPO_new</code> in <code>ITensorMPOConstruction</code> package. See <a href="https://github.com/FuzzifiED/FuzzifiED.jl/blob/main/examples/example_ising_dmrg_easysweep.jl"><code>example_ising_dmrg_easysweep.jl</code></a> for example. <em>N.b.</em>, <code>MPO_new</code> only applies to the cases that the operator do not carry charge under any of the quantum numbers.</li><li><code>clear_previous :: Bool</code>. If set true, the file <code>op_$(id).h5</code> will be removed and the calculation will start from scratch. Facultative, false by default.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/FuzzifiED/FuzzifiED.jl/blob/d7cfcaa9b45dc1457e5e50ae24b49992d02481e9/ext/FuzzifiEDEasySweepExt/easy_sweep.jl#L188-L203">source</a></section></article><h2 id="Modified-version-of-ITensor"><a class="docs-heading-anchor" href="#Modified-version-of-ITensor">Modified version of ITensor</a><a id="Modified-version-of-ITensor-1"></a><a class="docs-heading-anchor-permalink" href="#Modified-version-of-ITensor" title="Permalink"></a></h2><p>We have forked <code>ITensors</code> and made some modifications to better suit our need. To install the modified packages, please use </p><pre><code class="language-julia hljs">using Pkg 
Pkg.add(url=&quot;https://github.com/FuzzifiED/ITensors.jl.git&quot;)
Pkg.add(url=&quot;https://github.com/FuzzifiED/ITensorMPS.jl.git&quot;)
Pkg.add(url=&quot;https://github.com/FuzzifiED/ITensorMPOConstruction.jl.git&quot;)</code></pre><p>The modifications made include</p><ul><li>Modify <code>ITensors</code> to allow up to 10 quantum numbers ; </li><li>Modify <code>ITensorMPS</code> to allow <code>write_when_maxdim_exceeds</code> in DMRG in the presence of projection matrices ;</li><li>Modify <code>ITensorMPOConstruction</code> to allow building MPOs that has symmetry flux ;</li><li>Modify <code>ITensorMPOConstruction</code> to allow compatibility with the newest version of <code>ITensors</code>.</li></ul><p>Please be warned that the robustness and the backward compatibility of these modifications are not warranted. </p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../models/">« Built-in models</a><a class="docs-footer-nextpage" href="../extension/">Other extensions »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>. Copyright (c) 2025 Zheng Zhou (周正) and contributors.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.11.3 on <span class="colophon-date" title="Thursday 15 May 2025 14:40">Thursday 15 May 2025</span>. Using Julia version 1.11.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
